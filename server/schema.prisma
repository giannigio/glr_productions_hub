generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id           String     @id
  email        String     @unique
  password     String
  role         String
  createdAt    DateTime   @default(now())
  crewMemberId String     @unique
  crewMember   CrewMember @relation(fields: [crewMemberId], references: [id])

  @@map("User")
}

model CrewMember {
  id                  String   @id
  name                String
  type                String
  roles               String[]
  dailyRate           Float
  overtimeRate        Float?
  travelIndemnity     Float?
  email               String?  @unique
  password            String?
  accessRole          String?
  phone               String
  absences            Json     @default("[]")
  expenses            Json     @default("[]")
  tasks               Json     @default("[]")
  documents           Json     @default("[]")
  financialDocuments  Json     @default("[]")

  user                User?

  @@map("CrewMember")
}

model Job {
  id                String   @id
  title             String
  client            String
  location          String
  locationId        String?
  startDate         String
  endDate           String
  status            String
  description       String
  departments       String[]
  isAwayJob         Boolean  @default(false)
  isSubcontracted   Boolean  @default(false)
  subcontractorName String?
  outfit            String?
  outfitNoLogo      Boolean  @default(false)
  phases            Json     @default("[]")
  vehicles          Json     @default("[]")
  materialList      Json     @default("[]")
  assignedCrew      String[]
  notes             String
  createdAt         DateTime @default(now())
  updatedAt         DateTime

  @@map("Job")
}

model Location {
  id                 String   @id
  name               String
  address            String
  hallSizeMQ         Int      @default(0)
  mapsLink           String
  isZtl              Boolean
  contactName        String
  contactPhone       String
  accessHours        String
  power              Json
  network            Json
  logistics          Json
  equipment          Json
  generalSurveyNotes String

  @@map("Location")
}

model InventoryItem {
  id            String  @id
  name          String
  category      String
  type          String?
  quantityOwned Int
  weightKg      Float?
  serialNumber  String? @unique
  status        String?
  accessories   String?
  notes         String?

  @@map("InventoryItem")
}

model AppSettings {
  id       Int   @id @default(autoincrement())
  settings Json

  @@map("AppSettings")
}
